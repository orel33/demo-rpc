# Demo RPC

## Installation

```bash
$ sudo apt install rpcbind rpcsvc-proto

$ rpcinfo -p
   program vers proto   port  service
    100000    4   tcp    111  portmapper
    100000    3   tcp    111  portmapper
    100000    2   tcp    111  portmapper
    100000    4   udp    111  portmapper
    100000    3   udp    111  portmapper
    100000    2   udp    111  portmapper


# install transport-independant RPC library
$ sudo apt install libtirpc-dev libtirpc3
```

## Demo 00

Given the interface [add.x](add.x), we can generate all the files including
sample code for client and server side by using `rpcgen`.

```bash
$ rpcgen -a -N add.x
```

According to manual, the option `-N` is for the newstyle of rpcgen. This allows
procedures to have  multiple arguments. It also uses the style of parameter
passing that closely resembles C. So, when passing an argument to a remote
procedure you do not have to pass a pointer to the argument but  the  argument
it‚Äêself.  This behaviour is different from the oldstyle of rpcgen generated
code. The newstyle is not the default case because of backward compatibility.

In this demo, we provide no implementation for the `add` program, but just a
`Makefile` to compile the sample code with library `tirpc`.

## Demo 01

This demo shows the implementation of the `add` program, by using client &
server stubs that are generated by `rpcgen`.

## Demo 02

In this demo, we do some refactoring compared to the previous demo, and we only
use `rpcgen` to generate the header `add.h`.

## Demo 03

This demo illustrates how to implement client and server directly without using
client & server stubs that are generated by `rpcgen`. This code is more simple
to understand than the previous one. It illustrates how to use directly RPC API.

## Biblio

* Sun RPC version 2 (RFC 1057) <https://www.rfc-editor.org/rfc/rfc1057.txt>
* <https://users.cs.cf.ac.uk/Dave.Marshall/C/node34.html>
* <https://docs.oracle.com/cd/E19683-01/816-1435/rpcgenpguide-24243/index.html>

---
<aurelien.esnard@u-bordeaux.fr>
